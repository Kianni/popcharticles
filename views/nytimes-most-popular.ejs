<a href="/dashboard" class="btn btn-success">To Dashboard</a>
<button id="fetchTopArticles" title="Fetch Word Cloud from NYTimes last seven days most viewed articles">Fetch Word Cloud</button>
<button id="downloadWordCloud" title="Download Word Cloud as Image">Download Word Cloud</button>

<div id="wordCloudContainer" style="width: 1000px; height: 800px;">
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="/js/wordcloud2.js"></script>
<script src="/js/fetch_top_popular.js"></script>
<script>
    window.onload = function() {
        console.log('html2canvas:', typeof html2canvas); // Check if html2canvas is loaded
        document.getElementById('downloadWordCloud').addEventListener('click', function() {
            const wordCloudContainer = document.getElementById('wordCloudContainer');
            html2canvas(wordCloudContainer).then(canvas => {
                const link = document.createElement('a');
                link.download = 'wordcloud.png';
                link.href = canvas.toDataURL();
                link.click();
            });
        });
    };
</script>